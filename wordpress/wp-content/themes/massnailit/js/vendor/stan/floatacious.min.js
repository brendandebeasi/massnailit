/*
 * Floatacious: Better floating in IE5/6/7
 * Copyright 2010 B@NG!
 * http://code.google.com/p/stan-js/#Floatacious
 * Available for use under the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Includes portions of jQuery
 * Copyright John Resig
 * http://jquery.com/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
 
 (function(){ver={version:"%%VERSION%%",timestamp:"%%TIMESTAMP%%"};fl=floatacious=window.floatacious=function(d,j,l,r){function p(a,i){if(a["fl_"+i+"s"])return a["fl_"+i+"s"];if(a["fl_"+i]&&a["fl_"+i]!=="fl_null")return a["fl_"+i];switch(i){case "fl":return fl.getStyle(a,"styleFloat");case "ds":return fl.getStyle(a,"display");case "cl":return fl.getStyle(a,"clear");case "ta":return fl.getStyle(a,"textAlign");case "zm":return fl.getStyle(a,"zoom");default:return fl.getStyle(a,i)}}fl.run=fl.run||0;if(!fl.stopped){if(typeof d==="function"){fl.callback=d;d=null}if(!d){if(fl.floating){fl.queued=true;return}fl.floating=true;d=document.body}l=l||0;var w=p(d,"fl"),D=w!="none",x=null,B=function(){};if(FLOAT_RESORT&&!fl.canIgnore(d)){for(var t=[],u=[],v=[],h=0;h<d.childNodes.length;h++)if(d.childNodes[h].tagName&&d.childNodes[h].tagName.match(/ignore/i))d.removeChild(d.childNodes[h--]);else fl.canIgnore(d.childNodes[h])||d.childNodes[h].fl_placeholder||t.push(d.childNodes[h]);for(h=0;h<t.length;h++){var z=p(t[h],"fl");if(z===(dir="left"))u.push(t[h]);else if(z===(dir="right"))v.push(t[h]);else continue;t[h].fl_floating=dir}t=function(a,i,m){var k=m||i,e;do{if(!(m=a?k.nextSibling:k.previousSibling))break;e=false;for(var b=m.fl_for?m.fl_for:m;!e;){e=true;if(b==i)break;if(b.nodeType===3)break;if(fl.canIgnore(b))break;if(p(b,"ds")==="none")break;if(p(b,"fl")==="none")break;e=false;break}if(e)k=m}while(e);if(k!=i)i.parentNode.insertBefore(i,a?k.nextSibling:k)};z=function(a){var i=document.createElement(FLOAT_PLACEHOLDER_TAG);if(FLOAT_PLACEHOLDER_CLASS)i.className=FLOAT_PLACEHOLDER_CLASS;i.style.display="none";i.fl_ignore="true";i.fl_for=a;a.fl_placeholder=i;a.parentNode.insertBefore(i,a);return i};for(h=0;h<u.length;h++){z(u[h]);t(0,u[h]);u[h].removeAttribute("fl_floating")}for(h=0;h<v.length;h++){z(v[h]);t(0,v[h]);v[h].removeAttribute("fl_floating")}B=function(){}}u=false;for(h=0;h<d.childNodes.length;h++){v=d.childNodes[h];if(v.nodeType===1&&!fl.canIgnore(v))u=fl(v,false,l+1)||u;if(fl.stopped)return}if(!fl.canIgnore(d)&&(r||d.floatacious||d.parentNode&&fl.getStyle(d,"width")==="auto"&&D&&u)){d.floatacious="true";x=function(a,i,m){function k(F){return F==="fl_null"?null:F}a.style.width="auto";var e=null,b=null,y=e=e=e=e=e=null;if(a.parentNode.fl_tas){e=a.parentNode.fl_ta;b=a.parentNode.fl_tas}else{b=fl.getStyle(a.parentNode,"textAlign")||"left";a.parentNode.fl_tas=b;e=a.parentNode.style.textAlign||"fl_null";a.parentNode.fl_ta=e}if(a.fl_tas){e=a.fl_ta;y=a.fl_tas}else{y=fl.getStyle(a,"textAlign")||"left";a.fl_tas=y;e=a.style.textAlign||"fl_null";a.fl_ta=e}if(i!==b&&!(i==="left"&&(b==="justify"||b==="center"))){for(e=0;e<a.parentNode.childNodes.length;e++){var g,A=a.parentNode.childNodes[e];if(A.nodeType===3){g=document.createElement(FLOAT_TEXT_TAG);if(FLOAT_TEXT_CLASS)g.className=FLOAT_TEXT_CLASS;g.fl_text="true";g.style.display="inline";g.style.textAlign=b;g.style.styleFloat="left";a.parentNode.insertBefore(g,A);g.appendChild(A);fl(g,true,0,true)}else{g=A;g.fl_text&&fl(g,true,0,true)}if(!fl.canIgnore(g))g.fl_ta_sib=fl.getStyle(g,"textAlign")}a.parentNode.style.textAlign=i;for(e=0;e<a.parentNode.childNodes.length;e++){g=a.parentNode.childNodes[e];if(!fl.canIgnore(g)&&g.fl_ta_sib!==fl.getStyle(g,"textAlign")){if(!g.fl_ta){g.fl_ta=g.style.textAlign||"fl_null";g.fl_tas=g.fl_ta_sib||"left"}g.style.textAlign=b}g.removeAttribute("fl_ta_sib")}}if(a.fl_fl){e=a.fl_fl;e=a.fl_fls}else if(a.style.styleFloat){e=a.style.styleFloat||"fl_null";a.fl_fl=e;e=fl.getStyle(a,"styleFloat");a.fl_fls=e}if(a.fl_ds)e=a.fl_ds;else if(a.style.display){e=a.style.display||"fl_null";a.fl_ds=e}if(a.fl_zm)e=a.fl_zm;else if(a.style.zoom){e=a.style.zoom||"fl_null";a.fl_zm=e}if(!a.fl_cl){a.fl_cl=a.style.clear||"fl_null";a.fl_cls=fl.getStyle(a,"clear")}if(!a.fl_text){for(e=0;e<a.childNodes.length;e++){g=a.childNodes[e];if(!fl.canIgnore(g)){if(!g.fl_text&&(g.nodeType===3||fl.getStyle(g,"display")==="inline"&&fl.getStyle(g,"styleFloat")==="none"&&!g.floatacious&&fl.getStyle(g,"width")==="auto")){b=document.createElement(FLOAT_TEXT_TAG);if(FLOAT_TEXT_CLASS)b.className=FLOAT_TEXT_CLASS;b.fl_text="true";b.style.display="inline";b.style.textAlign=y;b.style.styleFloat="left";a.insertBefore(b,g);b.appendChild(g);fl(b,true,0,true);b.style.styleFloat="none"}else{b=g;b.fl_text&&fl(b,true,0,true)}if(!b.fl_ta){b.fl_ta=b.style.textAlign||"fl_null";b.fl_tas=fl.getStyle(b,"textAlign")||"left"}}}for(e=0;e<a.childNodes.length;e++){b=a.childNodes[e];if(!fl.canIgnore(b)){if(b.fl_ta_c!==fl.getStyle(b,"textAlign")){if(!b.fl_ta){b.fl_ta=b.style.textAlign||"fl_null";b.fl_tas=b.fl_ta_c||"left"}b.style.textAlign=y}b.removeAttribute("fl_ta_c")}}}y=fl.all(a,true);for(e=0;e<y.length;e++){b=y[e];if(!(b.fl_ignore||b.tagName.match(/ignore/))){if(!b.fl_ds)b.fl_ds=b.style.display||"fl_null";if(!b.fl_fl){b.fl_fl=b.style.styleFloat||"fl_null";b.fl_fls=fl.getStyle(b,"styleFloat")}if(!b.fl_zm)b.fl_zm=b.style.zoom||"fl_null";b.style.display="inline-block";b.style.zoom=1;g=b.fl_fls;if(g!=="none"&&i!==g){a.style.textAlign=g;b.style.styleFloat=g==="right"?"none":"left";b.style.display="inline";g=p(b,"cl");if(!b.fl_text&&b.parentNode==a&&g!=="none"){var o=false;A=false;if(g==="both"||g==="left")for(var C=b.previousSibling;C;){if(!fl.canIgnore(b)&&(C.nodeType===3||C.fl_text))break;else if(C.offsetWidth&&p(b,"fl")!=="none"){o=true;break}C=C.previousSibling}if(o){o=document.createElement("BR");o.fl_ignore="true";o.fl_clear="true";o.style.styleFloat=i;a.insertBefore(o,b)}if(g==="both"||g==="right")for(o=b.nextSibling;o;){if(o.nodeType===3||o.fl_text)break;else if(!fl.canIgnore(b)&&o.offsetWidth&&p(b,"fl")!=="none"){A=true;break}o=o.previousSibling}if(A){o=document.createElement("BR");o.fl_ignore="true";o.fl_clear="true";o.style.styleFloat=i;a.insertBefore(o,b.nextSibling)}if(!b.fl_cls){b.fl_cls=g;b.fl_cl=b.style.clear||"fl_null"}b.style.clear=g!=="both"?"none":g}}else if(g!=="none"&&g===i){if(g==="right")b.style.styleFloat="none";b.style.display="inline";if(p(b,"cl")!=="none")b.style.display="inline-block"}else if(g===i||b.fl_text)b.style.styleFloat="none"}}a.style.zoom=1;a.style.display="inline";a.style.styleFloat="none";if(!a.parentNode.fl_zm)a.parentNode.fl_zm=a.parentNode.style.zoom||"fl_null";a.parentNode.style.zoom=1;a.style.width=a.fl_text?a.offsetWidth+3:fl.getWidth(a);FLOAT_RESORT&&m(a,i);fl.getStyle(a,"textAlign");for(e=0;e<y.length;e++){b=y[e];if(b.fl_text){b.parentNode.insertBefore(b.childNodes[0],b);b.parentNode.removeChild(b)}else{if(b.fl_ta){fl.removeStyle(b,"textAlign",k(b.fl_ta));b.removeAttribute("fl_ta");b.removeAttribute("fl_tas")}if(b.fl_fl){fl.removeStyle(b,"float",k(b.fl_fl));b.removeAttribute("fl_fl");b.removeAttribute("fl_fls")}if(b.fl_ds){fl.removeStyle(b,"display",k(b.fl_ds));b.removeAttribute("fl_ds")}if(b.fl_cl)if(i==="left"&&b.fl_cls==="both"&&fl.getStyle(b,"styleFloat")==="right")b.style.clear="none";else{fl.removeStyle(b,"clear",k(b.fl_cl));b.removeAttribute("fl_cl");b.removeAttribute("fl_cls")}}}for(e=0;e<a.childNodes.length;e++)a.childNodes[e].fl_clear&&a.removeChild(a.childNodes[e--]);fl.removeStyle(a.parentNode,"textAlign",k(a.parentNode.fl_ta));a.parentNode.removeAttribute("fl_ta");a.parentNode.removeAttribute("fl_tas");fl.removeStyle(a,"float",k(a.fl_fl));fl.removeStyle(a,"clear",k(a.fl_cl));fl.removeStyle(a,"display",k(a.fl_ds));fl.removeStyle(a,"textAlign",k(a.fl_ta));a.removeAttribute("fl_fl");a.removeAttribute("fl_fls");a.removeAttribute("fl_ds");a.removeAttribute("fl_ta");a.removeAttribute("fl_tas")}}else FLOAT_RESORT&&B(d,w);if(x&&j)x(d,w,B);else if(d==document.body){var q=(fl.queue||[]).slice(0);j=false;l=0;r=false;if(!q.length){fl.run++;if(typeof stan==="undefined"){fl.floating=false;if(fl.queued){fl.queued=false;fl()}}return}for(h=0;h<q.length;h++){if(q[h][1]>l)l=q[h][1];if(j===false||q[h][1]<=j){j=q[h][1];r=h}}f=1;for(h=0;h<q.length;h++)if(r===h){var n=h;setTimeout(function(){q[n][0](fl.callback,true)},(l-q[h][1])*f)}else setTimeout(q[h][0],(l-q[h][1])*f);fl.queue=[]}else if(x){q=fl.queue||[];q[q.length]=[function(a,i){x(d,w,B);a&&a(FLOAT_RESORT);if(i){fl.run++;if(typeof stan==="undefined"){floatacious.floating=false;if(fl.queued){fl.queued=false;fl()}}FLOAT_RESORT=false}},l];fl.queue=q}return D}};fl.version=ver.version;fl.timestamp=ver.timestamp;fl.getWidth=function(d){function j(n,a,i){var m,k=n.style;if(D.test(a))a=styleFloat;if(!i&&k&&k[a])m=k[a];else if(u){if(D.test(a))a="float";a=a.replace(rupper,"-$1").toLowerCase();k=n.ownerDocument.defaultView;if(!k)return null;if(n=k.getComputedStyle(n,null))m=n.getPropertyValue(a);if(a==="opacity"&&m==="")m="1"}else if(n.currentStyle){i=a.replace(v,q);m=n.currentStyle[a]||n.currentStyle[i];if(!h.test(m)&&z.test(m)){a=k.left;var e=n.runtimeStyle.left;n.runtimeStyle.left=n.currentStyle.left;k.left=i==="fontSize"?"1em":m||0;m=k.pixelLeft+"px";k.left=a;n.runtimeStyle.left=e}}return m}function l(n,a){for(var i=n[0],m=0;m<n.length&&a.call(i,m,i)!==false;i=n[++m]);}function r(){x=w==="width"?d.offsetWidth:d.offsetHeight;fl.ieVer>=6&&l(t,function(){x-=parseFloat(j(d,"padding"+this,true))||0;x-=parseFloat(j(d,"border"+this+"Width",true))||0})}function p(n,a,i){var m={};for(var k in a){m[k]=n.style[k];n.style[k]=a[k]}i.call(n);for(k in a)n.style[k]=m[k]}var w="width",D=/float/i,x,B={position:"absolute",visibility:"hidden",display:"block"},t=["Left","Right"],u=document.defaultView&&document.defaultView.getComputedStyle,v=/-([a-z])/ig,h=/^-?\d+(?:px)?$/i,z=/^-?\d/,q=function(n,a){return a.toUpperCase()};d.offsetWidth!==0?r():p(d,B,r);return Math.max(0,Math.round(x))};fl.canIgnore=function(d){return d.nodeType===1?d.className.match(/(^|\s)fl_ignore($|\s)/i)||d.tagName.match(/ignore|!/i)||d.fl_ignore:false};fl.all=function(d,j){c=[];for(var l=0;l<d.childNodes.length;l++)if(d.childNodes[l].nodeType===1&&(j||!fl.canIgnore(d.childNodes[l]))){c.push(d.childNodes[l]);c=c.concat(fl.all(d.childNodes[l],j))}return c};fl.getStyleString=function(d){var j;j=d.style.cssText;if(typeof j!="string")j=d.getAttribute("style");return j};fl.removeStyle=function(d,j,l){function r(p,w){p.style.setAttribute?p.style.setAttribute("cssText",w):p.setAttribute("style",w)}j=j.replace(/([A-Z])/g,"-$1");j=j.toLowerCase();style=fl.getStyleString(d);E=new RegExp("(^|\\s|;)"+j+"\\s*:[^;]+","i");if(l)style.match(E)?r(d,style.replace(E,"$1"+j+": "+l)):r(d,style+"; "+l);else r(d,style.replace(E,""))};fl.getStyle=window.fl.getStyle=function(d,j){if(!d.style)return null;if(d.style[j])return d.style[j];else if(d.currentStyle)return d.currentStyle[j];else if(document.defaultView&&document.defaultView.getComputedStyle){j=j.replace(/([A-Z])/g,"-$1");j=j.toLowerCase();return(s=document.defaultView.getComputedStyle(d,""))&&s.getPropertyValue(j)}else return null};fl.IEContentLoaded=function(d,j){var l=d.document,r=false,p=function(){if(!r){r=true;j()}};(function(){try{l.documentElement.doScroll("left")}catch(w){setTimeout(arguments.callee,50);return}p()})();l.onreadystatechange=function(){if(l.readyState=="complete"){l.onreadystatechange=null;p()}}};var H=document.scripts[document.scripts.length-1];fl.loader=function(d){try{eval(H.innerHTML)}catch(j){}if(typeof FLOAT_RESIZE==="undefined")window.FLOAT_RESIZE=true;if(typeof FLOAT_RESORT==="undefined")window.FLOAT_RESORT=true;if(typeof FLOAT_PLACEHOLDER_TAG==="undefined")window.FLOAT_PLACEHOLDER_TAG="FLPLACEHOLDER";if(typeof FLOAT_PLACEHOLDER_CLASS==="undefined")window.FLOAT_PLACEHOLDER_CLASS="";if(typeof FLOAT_TEXT_TAG==="undefined")window.FLOAT_TEXT_TAG="FLTEXT";if(typeof FLOAT_TEXT_CLASS==="undefined")window.FLOAT_TEXT_CLASS="";if(typeof FLOAT_TEXT_CLASS==="undefined")window.FLOAT_TEXT_CLASS="";if(fl.stopped||!(fl.ieVer>0&&fl.ieVer<8))d&&d();else{fl(d);if(FLOAT_RESIZE){fl.interval=setInterval(function(){if(!(fl.ieVer>=8&&fl.ieVer<9&&!fl.resized)){fl.resize=false;if(parseInt(fl.bodyOffsetWidth)!==document.body.offsetWidth||parseInt(fl.bodyOffsetHeight)!==document.body.offsetHeight)fl();fl.bodyOffsetWidth=document.body.offsetWidth;fl.bodyOffsetHeight=document.body.offsetHeight}},500);window.attachEvent("onresize",function(){fl.resized=true})}}};var G=-1;if(navigator.appName==="Microsoft Internet Explorer"){var E=/MSIE ([0-9]{1,}[.0-9]{0,})/;if(E.exec(navigator.userAgent)!=null)G=parseFloat(RegExp.$1)}fl.ieVer=G;fl.IEContentLoaded(window,function(){typeof stan==="undefined"&&fl.loader()})})();